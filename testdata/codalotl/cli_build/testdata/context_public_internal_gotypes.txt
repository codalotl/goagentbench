// doc.go:

// Package gotypes loads and exposes go/types facts for a single package.
//
// The package provides TypeInfo, a read-only snapshot of type-checker results (ex: Uses, Defs, Types, Selections) keyed
// by the package's current FileSet and AST, and LoadTypeInfoInto, which populates that snapshot by invoking golang.org/x/tools/go/packages.
//
// Loading replaces the target package's FileSet and AST with those created by packages.Load so that the go/types.Info maps
// are keyed by the corresponding nodes. Callers should treat the resulting TypeInfo as immutable. Set includeTests to true
// to load and type-check test files alongside the package.
package gotypes

// gotypes.go:

// TypeInfo holds type-checker facts for a single package as produced by go/types. It is typically constructed by LoadTypeInfoInto
// and should be treated as a read-only snapshot of the package's type information.
type TypeInfo struct {
	// Info contains the go/types facts (Uses, Defs, Types, Selections, etc.) for the loaded package, keyed by AST nodes from
	// the package's current FileSet and AST.
	Info types.Info
}

// LoadTypeInfoInto uses x/toolsgo/packages to load type information for pkg. ALERT: it replaces pkg's files' AST and FileSet information
// with a new version created from packages.Load, because Info's maps' keys are pointers from AST nodes.
func LoadTypeInfoInto(pkg *gocode.Package, includeTests bool) (*TypeInfo, error)

