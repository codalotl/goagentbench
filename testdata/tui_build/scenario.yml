name: Building a TUI framework from a spec
repo: github.com/codalotl/codalotl
commit: 22d5465c09b1bebc75123b93f396c6f3ba224665

classification:
  type: build-package
  has-spec: true
  single-package: true
  sees-failing-tests: true

# Steps to set up. Could include copying files from this scenario folder. Nothing agent-specific.
# If a commit already has a failing test file that we can use for verification, there need be no setup.
# Alternatively, we can copy test files over before (dring setup) or after (during verification) the agent has finished.
setup: null

# Instructions and other agent configuration for this problem.
# This COULD involve per-agent specialization?
agent:
  instructions: |
    In internal/q/tui, read the SPEC.md and build the package according to the spec.
    Do not install or use third party packages that aren't already used in go.mod.
    Do not modify the SPEC.md or any provided tests. You may write new tests.
  allow-multiple-turns: true # If the agent ends its turn before solving the problem, this allows it to continue.

  # idea: for big tasks like this, it may make sense to let planning agents do a planning phase. Non-planning agents
  # can just get a turn where we give a generic "make a plan" instruction.
  # plan: true
    

# How do we know if the agent succeeded?
# - Existing tests pass (need to ensure the agent didn't delete or disable the tests, which they sometimes do!)
# - Copy test files(s) from this directory to some path and run them.
# - Ensure snippet signatures exist as we expect
# - Ensure the copied test files type check correctly. This could be a better way to verify snippet signatures.
# - Ensure some files are not modified. Ex: only files in package are modified; no new modules installed.
verify:
   only-modify: internal/q/tui # only-modify-recursive could also exist
   no-modify:
     - internal/q/tui/golden* # Do not modify any golden test files
     - internal/q/tui/SPEC.md # Do not modify the spec.
   tests: "go test ./internal/q/tui"