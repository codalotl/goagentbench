name: Rename only-modify -> must-modify + impl
repo: github.com/codalotl/goagentbench
commit: 1ec2e9d63f208e4e9bf0966f0450043f060eda1b

classification:
  type: feature
  has-spec: true
  single-package: false
  sees-failing-tests: false

setup: null

agent:
  package: internal/verify
  instructions: |
      Read @SPEC.md and @README.md, and implement this in internal/verify:
      - Rename scenario's verify.only-modify to verify.must-modify.
      - must-modify only means: for each entry, at least one working-tree change must match it. Directory entries are nonrecursive (trailing slash optional); globs are allowed.
      - Changes elsewhere are allowed unless blocked by no-modify.
      - Consider tracked/untracked edits and deletions; ignore .run-start.json, .run-progress.json, and .git/.
      - If any must-modify entry lacks a matching change, or a no-modify path is changed, verification fails before verify.tests/verify.partial-tests are checked.
          - Emit exactly one failed TestResult named verify.must-modify.
          - Put the human-readable description (missing entries and/or offending paths) in TestResult.Output; leave TestResult.Error empty unless an unexpected internal error prevents determining changes.
      - If checks pass, run tests as usual.

verify:
  copy:
    - from: gab_test.go 
      to: internal/verify/gab
  must-modify:
    - internal/scenario
    - internal/verify
  tests:
    - ./...
